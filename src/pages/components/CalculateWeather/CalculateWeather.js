import React from 'react';
// import { useFetch } from './../../hooks';
// import { COORDINATES } from './../../Constants';

const CalculateWeather = () => {
  const [qtyAttendees, setQtyAttendees] = React.useState();
  const [boxes, setBoxes] = React.useState();

  const handleChange = (event) => {
    setQtyAttendees(event.target.value);
  }

  // const [data] = useFetch(
  //   `https://weatherbit-v1-mashape.p.rapidapi.com/forecast/daily?lang=es&lon=${COORDINATES.LON}&lat=${COORDINATES.LAT}`, {
  //   "headers": {
  //     "x-rapidapi-host": "weatherbit-v1-mashape.p.rapidapi.com",
  //     "x-rapidapi-key": "1456dc017emsha9abe912476d07ep1a9e30jsn21a496626616",
  //   }
  // });

  const data = {
    "data": [
      {
        "moonrise_ts": 1598100528,
        "wind_cdir": "S",
        "rh": 40,
        "pres": 1022.44,
        "high_temp": 16.1,
        "sunset_ts": 1598131523,
        "ozone": 286.125,
        "moon_phase": 0.318701,
        "wind_gust_spd": 11.5251,
        "snow_depth": 0,
        "clouds": 0,
        "ts": 1598065260,
        "sunrise_ts": 1598091676,
        "app_min_temp": 8,
        "wind_spd": 3.38361,
        "pop": 0,
        "wind_cdir_full": "Sur",
        "slp": 1024.86,
        "moon_phase_lunation": 0.14,
        "valid_date": "2020-08-22",
        "app_max_temp": 16.1,
        "vis": 24.1349,
        "dewpt": -1.5,
        "snow": 0,
        "uv": 2.44986,
        "weather": {
          "icon": "c01d",
          "code": 800,
          "description": "Cielo despejado"
        },
        "wind_dir": 186,
        "max_dhi": null,
        "clouds_hi": 0,
        "precip": 0,
        "low_temp": 10.3,
        "max_temp": 16.2,
        "moonset_ts": 1598150700,
        "datetime": "2020-08-22",
        "temp": 12.2,
        "min_temp": 7.8,
        "clouds_mid": 0,
        "clouds_low": 0
      },
      {
        "moonrise_ts": 1598188965,
        "wind_cdir": "NNE",
        "rh": 58,
        "pres": 1017.76,
        "high_temp": 17.7,
        "sunset_ts": 1598217967,
        "ozone": 280.904,
        "moon_phase": 0.318701,
        "wind_gust_spd": 13.1099,
        "snow_depth": 0,
        "clouds": 0,
        "ts": 1598151660,
        "sunrise_ts": 1598178000,
        "app_min_temp": 10.1,
        "wind_spd": 4.44632,
        "pop": 0,
        "wind_cdir_full": "Norte-Noreste",
        "slp": 1020.08,
        "moon_phase_lunation": 0.17,
        "valid_date": "2020-08-23",
        "app_max_temp": 17.7,
        "vis": 24.135,
        "dewpt": 5.3,
        "snow": 0,
        "uv": 5.66418,
        "weather": {
          "icon": "c01d",
          "code": 800,
          "description": "Cielo despejado"
        },
        "wind_dir": 26,
        "max_dhi": null,
        "clouds_hi": 0,
        "precip": 0,
        "low_temp": 10.1,
        "max_temp": 17.8,
        "moonset_ts": 1598237100,
        "datetime": "2020-08-23",
        "temp": 13.6,
        "min_temp": 9.8,
        "clouds_mid": 0,
        "clouds_low": 0
      },
      {
        "moonrise_ts": 1598277509,
        "wind_cdir": "NE",
        "rh": 70,
        "pres": 1013.31,
        "high_temp": 19.6,
        "sunset_ts": 1598304411,
        "ozone": 264.794,
        "moon_phase": 0.435906,
        "wind_gust_spd": 13.3236,
        "snow_depth": 0,
        "clouds": 37,
        "ts": 1598238060,
        "sunrise_ts": 1598264324,
        "app_min_temp": 12.4,
        "wind_spd": 3.82348,
        "pop": 0,
        "wind_cdir_full": "Noreste",
        "slp": 1015.45,
        "moon_phase_lunation": 0.2,
        "valid_date": "2020-08-24",
        "app_max_temp": 19.1,
        "vis": 24.135,
        "dewpt": 10.1,
        "snow": 0,
        "uv": 3.30072,
        "weather": {
          "icon": "c02d",
          "code": 802,
          "description": "Nubes dispersas"
        },
        "wind_dir": 42,
        "max_dhi": null,
        "clouds_hi": 0,
        "precip": 0,
        "low_temp": 12.4,
        "max_temp": 19.6,
        "moonset_ts": 1598241235,
        "datetime": "2020-08-24",
        "temp": 15.7,
        "min_temp": 12.3,
        "clouds_mid": 0,
        "clouds_low": 37
      },
      {
        "moonrise_ts": 1598366251,
        "wind_cdir": "ENE",
        "rh": 77,
        "pres": 1009.63,
        "high_temp": 19.9,
        "sunset_ts": 1598390854,
        "ozone": 271.745,
        "moon_phase": 0.554116,
        "wind_gust_spd": 11.5449,
        "snow_depth": 0,
        "clouds": 84,
        "ts": 1598324460,
        "sunrise_ts": 1598350648,
        "app_min_temp": 15.7,
        "wind_spd": 2.85484,
        "pop": 30,
        "wind_cdir_full": "Este-Noreste",
        "slp": 1011.72,
        "moon_phase_lunation": 0.24,
        "valid_date": "2020-08-25",
        "app_max_temp": 19.7,
        "vis": 23.1539,
        "dewpt": 13,
        "snow": 0,
        "uv": 1.8037,
        "weather": {
          "icon": "c04d",
          "code": 804,
          "description": "Cubierto"
        },
        "wind_dir": 62,
        "max_dhi": null,
        "clouds_hi": 63,
        "precip": 1.4375,
        "low_temp": 15.7,
        "max_temp": 20,
        "moonset_ts": 1598331706,
        "datetime": "2020-08-25",
        "temp": 17.2,
        "min_temp": 15.7,
        "clouds_mid": 27,
        "clouds_low": 62
      },
      {
        "moonrise_ts": 1598455268,
        "wind_cdir": "SSE",
        "rh": 93,
        "pres": 1006.73,
        "high_temp": 21,
        "sunset_ts": 1598477298,
        "ozone": 276.021,
        "moon_phase": 0.66639,
        "wind_gust_spd": 9.42413,
        "snow_depth": 0,
        "clouds": 99,
        "ts": 1598410860,
        "sunrise_ts": 1598436970,
        "app_min_temp": 15.9,
        "wind_spd": 1.98482,
        "pop": 75,
        "wind_cdir_full": "Sur-Sureste",
        "slp": 1008.8,
        "moon_phase_lunation": 0.27,
        "valid_date": "2020-08-26",
        "app_max_temp": 21.1,
        "vis": 21.0306,
        "dewpt": 16.6,
        "snow": 0,
        "uv": 1.81922,
        "weather": {
          "icon": "t02d",
          "code": 201,
          "description": "Tormenta con lluvia"
        },
        "wind_dir": 148,
        "max_dhi": null,
        "clouds_hi": 98,
        "precip": 9.1875,
        "low_temp": 13,
        "max_temp": 21,
        "moonset_ts": 1598422022,
        "datetime": "2020-08-26",
        "temp": 17.8,
        "min_temp": 15.9,
        "clouds_mid": 40,
        "clouds_low": 42
      },
      {
        "moonrise_ts": 1598544606,
        "wind_cdir": "SSE",
        "rh": 71,
        "pres": 1011.77,
        "high_temp": 17.4,
        "sunset_ts": 1598563741,
        "ozone": 273.692,
        "moon_phase": 0.767126,
        "wind_gust_spd": 10.2908,
        "snow_depth": 0,
        "clouds": 90,
        "ts": 1598497260,
        "sunrise_ts": 1598523292,
        "app_min_temp": 12.8,
        "wind_spd": 4.25542,
        "pop": 0,
        "wind_cdir_full": "Sur-Sureste",
        "slp": 1014.07,
        "moon_phase_lunation": 0.31,
        "valid_date": "2020-08-27",
        "app_max_temp": 17.4,
        "vis": 24.1351,
        "dewpt": 9.7,
        "snow": 0,
        "uv": 1.74092,
        "weather": {
          "icon": "c04d",
          "code": 804,
          "description": "Cubierto"
        },
        "wind_dir": 156,
        "max_dhi": null,
        "clouds_hi": 90,
        "precip": 0,
        "low_temp": 11.8,
        "max_temp": 18.2,
        "moonset_ts": 1598512066,
        "datetime": "2020-08-27",
        "temp": 15.3,
        "min_temp": 11.9,
        "clouds_mid": 32,
        "clouds_low": 46
      },
      {
        "moonrise_ts": 1598634258,
        "wind_cdir": "ESE",
        "rh": 81,
        "pres": 1014.81,
        "high_temp": 16.9,
        "sunset_ts": 1598650184,
        "ozone": 296.446,
        "moon_phase": 0.852229,
        "wind_gust_spd": 9.42271,
        "snow_depth": 0,
        "clouds": 79,
        "ts": 1598583660,
        "sunrise_ts": 1598609613,
        "app_min_temp": 11.8,
        "wind_spd": 2.48073,
        "pop": 80,
        "wind_cdir_full": "Este-Sureste",
        "slp": 1016.95,
        "moon_phase_lunation": 0.34,
        "valid_date": "2020-08-28",
        "app_max_temp": 14,
        "vis": 23.1105,
        "dewpt": 9.5,
        "snow": 0,
        "uv": 1.74014,
        "weather": {
          "icon": "r04d",
          "code": 520,
          "description": "Aguacero ligero"
        },
        "wind_dir": 111,
        "max_dhi": null,
        "clouds_hi": 16,
        "precip": 3.6875,
        "low_temp": 11.1,
        "max_temp": 14.1,
        "moonset_ts": 1598601739,
        "datetime": "2020-08-28",
        "temp": 12.8,
        "min_temp": 11.8,
        "clouds_mid": 6,
        "clouds_low": 73
      },
      {
        "moonrise_ts": 1598724152,
        "wind_cdir": "SSO",
        "rh": 70,
        "pres": 1015.82,
        "high_temp": 13.4,
        "sunset_ts": 1598736627,
        "ozone": 311.309,
        "moon_phase": 0.918997,
        "wind_gust_spd": 9.02571,
        "snow_depth": 0,
        "clouds": 63,
        "ts": 1598670060,
        "sunrise_ts": 1598695934,
        "app_min_temp": 11.1,
        "wind_spd": 3.09965,
        "pop": 0,
        "wind_cdir_full": "Sur-Suroeste",
        "slp": 1018.02,
        "moon_phase_lunation": 0.37,
        "valid_date": "2020-08-29",
        "app_max_temp": 16.9,
        "vis": 23.7883,
        "dewpt": 7.7,
        "snow": 0,
        "uv": 3.45233,
        "weather": {
          "icon": "c03d",
          "code": 803,
          "description": "Poco nuboso"
        },
        "wind_dir": 208,
        "max_dhi": null,
        "clouds_hi": 44,
        "precip": 0,
        "low_temp": 8.8,
        "max_temp": 17,
        "moonset_ts": 1598690998,
        "datetime": "2020-08-29",
        "temp": 13.6,
        "min_temp": 10.7,
        "clouds_mid": 5,
        "clouds_low": 34
      },
      {
        "moonrise_ts": 1598814172,
        "wind_cdir": "SE",
        "rh": 68,
        "pres": 1023.18,
        "high_temp": 10.6,
        "sunset_ts": 1598823071,
        "ozone": 307.988,
        "moon_phase": 0.965851,
        "wind_gust_spd": 9.63064,
        "snow_depth": 0,
        "clouds": 80,
        "ts": 1598756460,
        "sunrise_ts": 1598782254,
        "app_min_temp": 7.5,
        "wind_spd": 4.31314,
        "pop": 20,
        "wind_cdir_full": "Sureste",
        "slp": 1025.22,
        "moon_phase_lunation": 0.41,
        "valid_date": "2020-08-30",
        "app_max_temp": 11.4,
        "vis": 24.135,
        "dewpt": 3.9,
        "snow": 0,
        "uv": 1.76596,
        "weather": {
          "icon": "c04d",
          "code": 804,
          "description": "Cubierto"
        },
        "wind_dir": 144,
        "max_dhi": null,
        "clouds_hi": 79,
        "precip": 0.0625,
        "low_temp": 5.6,
        "max_temp": 13.4,
        "moonset_ts": 1598779864,
        "datetime": "2020-08-30",
        "temp": 9.6,
        "min_temp": 6.7,
        "clouds_mid": 17,
        "clouds_low": 72
      },
      {
        "moonrise_ts": 1598904207,
        "wind_cdir": "SE",
        "rh": 56,
        "pres": 1027.74,
        "high_temp": 16.1,
        "sunset_ts": 1598909514,
        "ozone": 314.109,
        "moon_phase": 0.992091,
        "wind_gust_spd": 8.21911,
        "snow_depth": 0,
        "clouds": 66,
        "ts": 1598842860,
        "sunrise_ts": 1598868573,
        "app_min_temp": 2.1,
        "wind_spd": 3.87663,
        "pop": 0,
        "wind_cdir_full": "Sureste",
        "slp": 1029.77,
        "moon_phase_lunation": 0.44,
        "valid_date": "2020-08-31",
        "app_max_temp": 10.6,
        "vis": 24.135,
        "dewpt": -0.3,
        "snow": 0,
        "uv": 3.76396,
        "weather": {
          "icon": "c03d",
          "code": 803,
          "description": "Poco nuboso"
        },
        "wind_dir": 131,
        "max_dhi": null,
        "clouds_hi": 15,
        "precip": 0,
        "low_temp": 6.2,
        "max_temp": 10.9,
        "moonset_ts": 1598868401,
        "datetime": "2020-08-31",
        "temp": 7.9,
        "min_temp": 5.3,
        "clouds_mid": 20,
        "clouds_low": 46
      },
      {
        "moonrise_ts": 1598994179,
        "wind_cdir": "SSE",
        "rh": 55,
        "pres": 1030.41,
        "high_temp": 13.8,
        "sunset_ts": 1598995957,
        "ozone": 316.307,
        "moon_phase": 0.99775,
        "wind_gust_spd": 7.53024,
        "snow_depth": 0,
        "clouds": 0,
        "ts": 1598929260,
        "sunrise_ts": 1598954892,
        "app_min_temp": 2.8,
        "wind_spd": 2.75367,
        "pop": 0,
        "wind_cdir_full": "Sur-Sureste",
        "slp": 1032.6,
        "moon_phase_lunation": 0.48,
        "valid_date": "2020-09-01",
        "app_max_temp": 13.1,
        "vis": 24.1349,
        "dewpt": -0.3,
        "snow": 0,
        "uv": 4.54683,
        "weather": {
          "icon": "c01d",
          "code": 800,
          "description": "Cielo despejado"
        },
        "wind_dir": 147,
        "max_dhi": null,
        "clouds_hi": 0,
        "precip": 0,
        "low_temp": 8,
        "max_temp": 13.1,
        "moonset_ts": 1598956686,
        "datetime": "2020-09-01",
        "temp": 8.8,
        "min_temp": 6.2,
        "clouds_mid": 0,
        "clouds_low": 0
      },
      {
        "moonrise_ts": 1599084057,
        "wind_cdir": "ONO",
        "rh": 44,
        "pres": 1027.83,
        "high_temp": 16.9,
        "sunset_ts": 1599082400,
        "ozone": 300.522,
        "moon_phase": 0.983538,
        "wind_gust_spd": 2.10257,
        "snow_depth": 0,
        "clouds": 2,
        "ts": 1599015660,
        "sunrise_ts": 1599041210,
        "app_min_temp": 7.8,
        "wind_spd": 0.924977,
        "pop": 0,
        "wind_cdir_full": "Oeste-Noroeste",
        "slp": 1030.19,
        "moon_phase_lunation": 0.51,
        "valid_date": "2020-09-02",
        "app_max_temp": 16.1,
        "vis": 24.135,
        "dewpt": -1,
        "snow": 0,
        "uv": 4.63393,
        "weather": {
          "icon": "c02d",
          "code": 801,
          "description": "Poco nuboso"
        },
        "wind_dir": 287,
        "max_dhi": null,
        "clouds_hi": 0,
        "precip": 0,
        "low_temp": 9.8,
        "max_temp": 16.3,
        "moonset_ts": 1599044798,
        "datetime": "2020-09-02",
        "temp": 12,
        "min_temp": 7.8,
        "clouds_mid": 0,
        "clouds_low": 2
      },
      {
        "moonrise_ts": 1599173846,
        "wind_cdir": "SO",
        "rh": 46,
        "pres": 1028.31,
        "high_temp": 20.4,
        "sunset_ts": 1599168843,
        "ozone": 298.272,
        "moon_phase": 0.950785,
        "wind_gust_spd": 2.9,
        "snow_depth": 0,
        "clouds": 4,
        "ts": 1599102060,
        "sunrise_ts": 1599127527,
        "app_min_temp": 9.2,
        "wind_spd": 1.84396,
        "pop": 0,
        "wind_cdir_full": "Suroeste",
        "slp": 1030.72,
        "moon_phase_lunation": 0.54,
        "valid_date": "2020-09-03",
        "app_max_temp": 16,
        "vis": 24.1351,
        "dewpt": 1.2,
        "snow": 0,
        "uv": 4.45552,
        "weather": {
          "icon": "c02d",
          "code": 801,
          "description": "Poco nuboso"
        },
        "wind_dir": 225,
        "max_dhi": null,
        "clouds_hi": 0,
        "precip": 0,
        "low_temp": 10.3,
        "max_temp": 16.3,
        "moonset_ts": 1599132808,
        "datetime": "2020-09-03",
        "temp": 12.6,
        "min_temp": 8,
        "clouds_mid": 0,
        "clouds_low": 4
      },
      {
        "moonrise_ts": 1599263573,
        "wind_cdir": "NE",
        "rh": 57,
        "pres": 1025.82,
        "high_temp": 13.8,
        "sunset_ts": 1599255286,
        "ozone": 298.4,
        "moon_phase": 0.901322,
        "wind_gust_spd": 7.94439,
        "snow_depth": 0,
        "clouds": 95,
        "ts": 1599188460,
        "sunrise_ts": 1599213845,
        "app_min_temp": 8,
        "wind_spd": 4.25982,
        "pop": 0,
        "wind_cdir_full": "Noreste",
        "slp": 1028.14,
        "moon_phase_lunation": 0.58,
        "valid_date": "2020-09-04",
        "app_max_temp": 13.8,
        "vis": 24.1351,
        "dewpt": 2.6,
        "snow": 0,
        "uv": 1.46377,
        "weather": {
          "icon": "c04d",
          "code": 804,
          "description": "Cubierto"
        },
        "wind_dir": 51,
        "max_dhi": null,
        "clouds_hi": 95,
        "precip": 0,
        "low_temp": 8.9,
        "max_temp": 13.8,
        "moonset_ts": 1599220782,
        "datetime": "2020-09-04",
        "temp": 10.9,
        "min_temp": 8,
        "clouds_mid": 24,
        "clouds_low": 0
      },
      {
        "moonrise_ts": 1599353278,
        "wind_cdir": "ESE",
        "rh": 60,
        "pres": 1015.85,
        "high_temp": 17.4,
        "sunset_ts": 1599341729,
        "ozone": 319.972,
        "moon_phase": 0.837293,
        "wind_gust_spd": 9.92826,
        "snow_depth": 0,
        "clouds": 62,
        "ts": 1599274860,
        "sunrise_ts": 1599300161,
        "app_min_temp": 10.3,
        "wind_spd": 2.92934,
        "pop": 0,
        "wind_cdir_full": "Este-Sureste",
        "slp": 1018.15,
        "moon_phase_lunation": 0.61,
        "valid_date": "2020-09-05",
        "app_max_temp": 16.9,
        "vis": 24.135,
        "dewpt": 5.7,
        "snow": 0,
        "uv": 2.52958,
        "weather": {
          "icon": "c03d",
          "code": 803,
          "description": "Poco nuboso"
        },
        "wind_dir": 118,
        "max_dhi": null,
        "clouds_hi": 0,
        "precip": 0,
        "low_temp": 9.7,
        "max_temp": 17.4,
        "moonset_ts": 1599308784,
        "datetime": "2020-09-05",
        "temp": 13.6,
        "min_temp": 9.7,
        "clouds_mid": 0,
        "clouds_low": 62
      },
      {
        "moonrise_ts": 1599443001,
        "wind_cdir": "OSO",
        "rh": 57,
        "pres": 1014.03,
        "high_temp": 20.4,
        "sunset_ts": 1599428172,
        "ozone": 308.869,
        "moon_phase": 0.760951,
        "wind_gust_spd": 5.92319,
        "snow_depth": 0,
        "clouds": 0,
        "ts": 1599361260,
        "sunrise_ts": 1599386478,
        "app_min_temp": 9.8,
        "wind_spd": 2.61275,
        "pop": 0,
        "wind_cdir_full": "Oeste-Suroeste",
        "slp": 1016.22,
        "moon_phase_lunation": 0.65,
        "valid_date": "2020-09-06",
        "app_max_temp": 19.4,
        "vis": 24.1352,
        "dewpt": 5.3,
        "snow": 0,
        "uv": 4.79251,
        "weather": {
          "icon": "c01d",
          "code": 800,
          "description": "Cielo despejado"
        },
        "wind_dir": 250,
        "max_dhi": null,
        "clouds_hi": 0,
        "precip": 0,
        "low_temp": 10.3,
        "max_temp": 20.4,
        "moonset_ts": 1599396880,
        "datetime": "2020-09-06",
        "temp": 15.1,
        "min_temp": 9.8,
        "clouds_mid": 0,
        "clouds_low": 0
      }
    ],
    "city_name": "Buenos Aires",
    "lon": -58.4,
    "timezone": "America/Argentina/Buenos_Aires",
    "lat": -34.64,
    "country_code": "AR",
    "state_code": "07"
  };

  const handleSubmit = (event) => {
    event.preventDefault();
    console.log(JSON.stringify(data));
    const temperature = data.data.temp;
    let qtyBeers;
    if (temperature < 20) {
      qtyBeers = qtyAttendees * 0.75;
    } else if (20 <= temperature < 24) {
      qtyBeers = qtyAttendees * 1;
    } else if (temperature >= 24) {
      qtyBeers = qtyAttendees * 2;
    }
    const boxes = Math.ceil(qtyBeers / 6);
    setBoxes(boxes);
  }

  return (
    <>
      <form onSubmit={handleSubmit}>
        <label>
          Quantity of attendees:
        <input
            value={qtyAttendees}
            type="number"
            onChange={handleChange}
          />
        </label>
        <input type="submit" value="Submit" />
      </form>
      <p>Quantity of beer boxes: {boxes}</p>
    </>
  );
}

export default CalculateWeather;
